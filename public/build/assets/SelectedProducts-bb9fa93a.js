import{_ as y}from"./InputForm-43a26370.js";import{T as b,c as g,o as l,a as i,e as c,F as v,i as h,b as t,d as f,u,g as k,t as r,q as C}from"./app-911921b1.js";import{t as V}from"./toast-a547e5f8.js";import{I as S}from"./IconTrash-38b0a34f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./createVueComponent-c420cc45.js";const $={key:0,class:"h-full text-center text-gray-400 flex items-center justify-center"},q={class:"w-full rounded-lg p-4 bg-white mb-2 border-2"},j={class:"flex gap-2"},w={key:0,class:"h-36 w-36 flex items-center justify-center"},N=["src"],T={class:"w-full flex flex-col justify-between"},U={class:"mb-3"},B=["onClick"],L={class:"text-gray-400"},I={key:0},O={class:"flex items-center justify-between"},D={key:0,class:"flex flex-col text-end text-xl font-bold"},F={key:1,class:"flex flex-col text-end text-xl font-bold"},P={key:1,class:"mt-4"},z={class:"grid grid-cols-2 gap-4"},E={class:"flex justify-end my-8"},G={class:"text-xl font-bold"},A=t("button",{class:"secondary-button"},"Cancelar",-1),W={__name:"SelectedProducts",props:{products:{type:Object,required:!1},type:{type:String,required:!0}},setup(a){const d=a,n=b({type:d.type,discount:0,note:"",client:"",total:0,products:null}),m=g(()=>d.type=="buy"?d.products.reduce((s,o)=>s+o.quantity*o.cost,0)-(n.discount??0):d.products.reduce((s,o)=>s+o.quantity*o.price,0)-(n.discount??0));function p(){n.products=d.products.map(function(s){return{product_id:s.id,quantity:s.quantity,measure:s.measure,cost:s.cost,price:s.price,inventory_id:s.inventory_id}}),n.total=m.value,n.post(route("dashboard.transactions.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{V.success("Transaccion relizada correctamente")}})}return(s,o)=>(l(),i("div",null,[a.products.length==0?(l(),i("div",$," No hay productos seleccionados ")):c("",!0),(l(!0),i(v,null,h(a.products,(e,x)=>(l(),i("div",q,[t("div",j,[e.image?(l(),i("div",w,[t("img",{src:e.image,onerror:"this.src='/not-found.jpg'",alt:"Imagen",class:"max-h-full max-w-full rounded-lg"},null,8,N)])):c("",!0),t("div",T,[t("div",U,[t("div",{class:"text-lg font-semibold mb-2",onClick:_=>s.$emit("edit",x),role:"button"},r(e.name)+" - "+r(e.measure)+" ("+r(e.quantity)+") ",9,B),t("div",L,[a.type=="buy"?(l(),i("span",I,"Costo: C$"+r(e.cost)+", ",1)):c("",!0),C("Precio: C$"+r(e.price),1)])]),t("div",O,[t("div",null,[f(u(S),{role:"button",onClick:_=>s.$emit("remove",x),class:"text-red-300"},null,8,["onClick"])]),a.type=="buy"?(l(),i("div",D," C$"+r((e.quantity*e.cost).toLocaleString("en-US")),1)):c("",!0),a.type=="sell"?(l(),i("div",F," C$"+r((e.quantity*e.price).toLocaleString("en-US")),1)):c("",!0)])])])]))),256)),m.value>0?(l(),i("div",P,[t("div",z,[f(y,{text:"Notas (Opcional)",modelValue:u(n).note,"onUpdate:modelValue":o[0]||(o[0]=e=>u(n).note=e)},null,8,["modelValue"]),a.type=="sell"?(l(),i(v,{key:0},[f(y,{text:"Cliente (Opcional)",modelValue:u(n).client,"onUpdate:modelValue":o[1]||(o[1]=e=>u(n).client=e)},null,8,["modelValue"]),a.type=="sell"?(l(),k(y,{key:0,text:"Descuento C$",modelValue:u(n).discount,"onUpdate:modelValue":o[2]||(o[2]=e=>u(n).discount=e)},null,8,["modelValue"])):c("",!0)],64)):c("",!0)]),t("div",E,[t("div",G," Total: C$"+r(m.value.toLocaleString("en-US")),1)]),t("div",{class:"flex items-center justify-end gap-4"},[A,t("button",{class:"primary-button",type:"button",onClick:p}," Guardar ")])])):c("",!0)]))}};export{W as default};
