import{_ as P}from"./AppLayout-ebf66ccd.js";import{T as B,j as T,r as k,o as p,g as z,h as f,d as u,u as a,a as g,b as e,F as x,i as A,t as d,e as S}from"./app-dafdfc05.js";import{_ as L}from"./FormSection-447bb743.js";import{_ as s}from"./InputForm-f7786dbc.js";import{_ as O}from"./FormModal-2d301625.js";import{I as j}from"./IconTrash-d6385d9f.js";import{c as E}from"./createVueComponent-a1973eaa.js";var D=E("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);const F=e("span",{class:"title"}," Agregar producto ",-1),K={class:"col-span-2"},G={class:"overflow-y-auto col-span-2"},H={class:"w-full text-sm text-left text-gray-600 mt-5"},J=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",null,"Medida"),e("th",null,"Cant."),e("th",null,"Costo (ud.)"),e("th",null,"Total"),e("th",null,"Precio (ud.)"),e("th",null,"Acciones")])],-1),Q={class:"divide-y divide-gray-100 border-t border-gray-100"},R={class:"flex gap-2"},W={key:0,colspan:"6",class:"text-center"},X=e("td",{colspan:"3",class:"text-right font-bold"},"Total",-1),Y={colspan:"3",class:"font-bold"},Z={class:"grid grid-cols-2 gap-4"},ee={class:"flex justify-end col-span-2 items-center gap-4"},te={class:"text-xl font-bold"},de={__name:"Create",props:{product:{type:Object,required:!1},isNew:{type:Boolean,default:!0}},setup(b){var V,_,h,C,q;const i=b,o=B({id:((V=i.product)==null?void 0:V.id)??null,sku:((_=i.product)==null?void 0:_.sku)??null,name:((h=i.product)==null?void 0:h.name)??null,image:((C=i.product)==null?void 0:C.image)??null,discount:((q=i.product)==null?void 0:q.discount)??null,inventory:[]}),l=T({measure:null,quantity:null,cost:null,price:null}),v=k(!1),c=k(null),$=[{name:"Inicio",route:route("dashboard.users.index")},{name:"Productos",route:route("dashboard.products.index")},{name:"Crear",route:route("dashboard.products.create")}];function U(){c.value!==null?o.inventory[c.value]={...l}:o.inventory.push({...l}),y()}function I(r){o.inventory.splice(r,1)}function w(r){c.value=r,l.measure=o.inventory[r].measure,l.quantity=o.inventory[r].quantity,l.cost=o.inventory[r].cost,l.price=o.inventory[r].price,v.value=!0,c.value=r}function y(){l.measure=null,l.quantity=null,l.cost=null,l.price=null,v.value=!1,c.value=null}function N(){i.isNew?o.post(route("dashboard.products.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y(),toast.success("Producto agregado")}}):o.put(route("dashboard.products.update",o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y(),toast.success("Producto actualizado")}})}return(r,n)=>(p(),z(P,{title:"Agregar",breads:$},{header:f(()=>[F]),default:f(()=>[u(L,{onOnSubmit:N},{default:f(()=>[u(s,{text:"SKU",modelValue:a(o).sku,"onUpdate:modelValue":n[0]||(n[0]=t=>a(o).sku=t),required:""},null,8,["modelValue"]),u(s,{text:"Name",modelValue:a(o).name,"onUpdate:modelValue":n[1]||(n[1]=t=>a(o).name=t),required:""},null,8,["modelValue"]),u(s,{text:"Image",modelValue:a(o).image,"onUpdate:modelValue":n[2]||(n[2]=t=>a(o).image=t),type:"url"},null,8,["modelValue"]),u(s,{text:"Descuento",modelValue:a(o).discount,"onUpdate:modelValue":n[3]||(n[3]=t=>a(o).discount=t),type:"number",min:0},null,8,["modelValue"]),b.isNew?(p(),g(x,{key:0},[e("div",K,[e("button",{class:"primary-button",type:"button",onClick:n[4]||(n[4]=t=>v.value=!0)}," Agregar inventario ")]),e("div",G,[e("table",H,[J,e("tbody",Q,[(p(!0),g(x,null,A(a(o).inventory,(t,m)=>(p(),g("tr",null,[e("td",null,d(t.measure),1),e("td",null,d(t.quantity),1),e("td",null,"C$"+d(t.cost),1),e("td",null,"C$"+d((t.quantity*t.cost).toLocaleString()),1),e("td",null," C$"+d(t.price),1),e("td",null,[e("div",R,[u(a(j),{role:"button",onClick:M=>I(m),size:"20"},null,8,["onClick"]),u(a(D),{role:"button",onClick:M=>w(m),size:"20"},null,8,["onClick"])])])]))),256)),e("tr",null,[a(o).inventory.length==0?(p(),g("td",W," No hay datos que mostrar ")):S("",!0)])]),e("tfoot",null,[e("tr",null,[X,e("td",Y," C$"+d(a(o).inventory.reduce((t,m)=>t+m.quantity*m.cost,0).toLocaleString()),1)])])])])],64)):S("",!0)]),_:1}),u(O,{show:v.value,title:"Inventario",onOnCancel:y,onOnSubmit:U},{default:f(()=>[e("div",Z,[u(s,{text:"Medida",modelValue:l.measure,"onUpdate:modelValue":n[5]||(n[5]=t=>l.measure=t),required:""},null,8,["modelValue"]),u(s,{text:"Cantidad",modelValue:l.quantity,"onUpdate:modelValue":n[6]||(n[6]=t=>l.quantity=t),type:"number",required:"",min:1},null,8,["modelValue"]),u(s,{text:"Costo (Unidad)",modelValue:l.cost,"onUpdate:modelValue":n[7]||(n[7]=t=>l.cost=t),type:"number",required:"",min:1},null,8,["modelValue"]),u(s,{text:"Precio (Unidad)",modelValue:l.price,"onUpdate:modelValue":n[8]||(n[8]=t=>l.price=t),type:"number",required:"",min:1},null,8,["modelValue"])]),e("div",ee,[e("div",te," Total: C$"+d((l.quantity*l.cost).toLocaleString()),1)])]),_:1},8,["show"])]),_:1}))}};export{de as default};
