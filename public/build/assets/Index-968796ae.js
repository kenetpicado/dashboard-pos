import{_ as T}from"./DateColumn-8d1bb5ff.js";import{_ as b}from"./InputForm-87d73238.js";import{_ as $}from"./SelectForm-54b0e010.js";import{_ as I}from"./StatCard-204862ca.js";import{T as D}from"./TableSection-9b53f28e.js";import{_ as w}from"./ThePaginator-767f5ee1.js";import{_ as N}from"./AppLayout-06a41fa6.js";import{c as q}from"./helpers-5242f40e.js";import{t as O}from"./toast-4f5544df.js";import{j as E,c as L,k as g,o as a,g as y,h as n,b as e,d as s,a as u,r as m,t as i,F as _,n as P,u as f,l as j,e as A,O as v}from"./app-09192f7b.js";import{I as B}from"./IconCurrencyDollarOff-dbdf835f.js";import{I as F}from"./IconCurrencyDollar-4dcdb420.js";import{I as R}from"./IconEye-54cfe2f6.js";import{I as U}from"./IconTrash-2ae08c7e.js";import"./Carbon-053ffa43.js";import"./createVueComponent-70685d68.js";import"./_plugin-vue_export-helper-c27b6911.js";const z=e("span",{class:"title"}," Transacciones ",-1),H={class:"mb-3"},M={class:"grid grid-cols-5 gap-4"},G=e("option",{selected:"",value:""},"Todos",-1),J=["value"],K={class:"mb-4"},Q={class:"grid grid-cols-5 gap-4"},W=e("th",null,"Fecha",-1),X=e("th",null,"Factura #",-1),Y=e("th",null,"Tipo",-1),Z=e("th",null,"Responsable",-1),ee=e("td",null,"Productos",-1),te=e("th",null,"Descuento",-1),oe=e("th",null,"Total",-1),se=e("th",null,"Acciones",-1),re={class:"hover:bg-gray-50"},ae={class:"font-bold"},le={class:"flex justify-between gap-4"},ne=["onClick"],ie={key:0},de=e("td",{colspan:"8",class:"text-center"},"No hay datos que mostrar",-1),ue=[de],we={__name:"Index",props:{transactions:{type:Object,required:!0},sell_month:{type:Number,required:!0},buy_month:{type:Number,required:!0},users:{type:Object,required:!0}},setup(c){const p=c,C={buy:"COMPRA",sell:"VENTA"},V=[{name:"Inicio",route:route("dashboard.index")},{name:"Transacciones",route:route("dashboard.transactions.index")}],x={buy:"badge-red",sell:"badge-indigo"},t=E({user_id:null,from:null,to:null}),k=L(()=>[{title:t.from||t.to?"Compras":"Compras del mes",value:"C$"+p.buy_month.toLocaleString(),icon:B},{title:t.from||t.to?"Ventas":"Ventas del mes",value:"C$"+p.sell_month.toLocaleString(),icon:F}]),d=new URLSearchParams(window.location.search);d.get("user_id")&&(t.user_id=d.get("user_id")),d.get("from")&&(t.from=d.get("from")),d.get("to")&&(t.to=d.get("to")),g(()=>t.user_id,l=>{l||delete t.user_id,t.from||delete t.from,t.to||delete t.to,h()}),g(()=>[t.from,t.to],([l,r])=>{l||delete t.from,r||delete t.to,t.user_id||delete t.user_id,h()});function h(){v.get(route("dashboard.transactions.index"),t,{preserveState:!0,preserveScroll:!0,only:["transactions","buy_month","sell_month"]})}function S(l){q({onConfirm:()=>{v.delete(route("dashboard.transactions.destroy",l),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{O.success("Eliminado correctamente")}})}})}return(l,r)=>(a(),y(N,{title:"Transacciones",breads:V},{header:n(()=>[z]),default:n(()=>[e("div",H,[e("div",M,[s($,{text:"Responsable",modelValue:t.user_id,"onUpdate:modelValue":r[0]||(r[0]=o=>t.user_id=o)},{default:n(()=>[G,(a(!0),u(_,null,m(c.users,o=>(a(),u("option",{value:o.id},i(o.name),9,J))),256))]),_:1},8,["modelValue"]),s(b,{text:"Desde",type:"date",modelValue:t.from,"onUpdate:modelValue":r[1]||(r[1]=o=>t.from=o)},null,8,["modelValue"]),s(b,{text:"Hasta",type:"date",modelValue:t.to,"onUpdate:modelValue":r[2]||(r[2]=o=>t.to=o)},null,8,["modelValue"])])]),e("div",K,[e("div",Q,[(a(!0),u(_,null,m(k.value,o=>(a(),y(I,{stat:o,key:o.title},null,8,["stat"]))),128))])]),s(D,null,{header:n(()=>[W,X,Y,Z,ee,te,oe,se]),body:n(()=>[(a(!0),u(_,null,m(c.transactions.data,(o,ce)=>(a(),u("tr",re,[e("td",null,[s(T,{date:o.created_at},null,8,["date"])]),e("td",null," #"+i(o.id),1),e("td",null,[e("span",{class:P(x[o.type])},i(C[o.type]),3)]),e("td",null,i(o.user.name),1),e("td",null,i(o.products_count),1),e("td",null," C$"+i(o.discount),1),e("td",null,[e("span",ae,"C$"+i(o.total.toLocaleString()),1)]),e("td",null,[e("div",le,[s(f(j),{href:l.route("dashboard.transactions.show",o.id),tooltip:"Detalles"},{default:n(()=>[s(f(R),{size:"22",role:"button"})]),_:2},1032,["href"]),e("span",{onClick:me=>S(o.id),tooltip:"Eliminar"},[s(f(U),{size:"22",role:"button",class:"text-red-200"})],8,ne)])])]))),256)),c.transactions.data.length==0?(a(),u("tr",ie,ue)):A("",!0)]),paginator:n(()=>[s(w,{links:c.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{we as default};
