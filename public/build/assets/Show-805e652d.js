import{_ as $}from"./AddButton-6ab4792e.js";import{_ as x}from"./DateColumn-f4b5371f.js";import{_ as k}from"./InputForm-65982cba.js";import{_ as P}from"./FormModal-bbdefaa9.js";import{_ as V}from"./StatCard-8c0aa58e.js";import{T}from"./TableSection-e9f67412.js";import{_ as w}from"./AppLayout-a81c0661.js";import{c as I}from"./helpers-1e38389a.js";import{t as f}from"./toast-797acdb6.js";import{i as L,T as q,c as B,o as s,g as h,h as l,d as n,b as t,a as c,r as g,F as v,t as F,u as _,e as N}from"./app-eaae9554.js";import{I as d}from"./IconCurrencyDollar-c91894f1.js";import{I as O}from"./IconTrash-9cb0d763.js";import"./Carbon-053ffa43.js";import"./createVueComponent-a889ca9b.js";import"./_plugin-vue_export-helper-c27b6911.js";const E=t("span",{class:"title"}," Pagos ",-1),j={class:"mb-4"},A={class:"grid grid-cols-5 gap-4"},D=t("th",null,"Fecha",-1),z=t("th",null,"Valor",-1),M=t("th",null,"Acciones",-1),U={class:"hover:bg-gray-50"},G={class:"font-bbold"},H={class:"flex gap-2"},J={tooltip:"Eliminar"},K={key:0},Q=t("td",{colspan:"3",class:"text-center"},"No hay datos que mostrar",-1),R=[Q],_t={__name:"Show",props:{transaction:{type:Object,required:!0},payments:{type:Object,required:!0}},setup(u){const o=u,b=[{name:"Inicio",route:route("dashboard.index")},{name:"Pendientes",route:route("dashboard.pending.index")},{name:"Pagos",route:route("dashboard.pending.show",o.transaction.id)}],m=L(!1),r=q({id:null,value:null,transaction_id:o.transaction.id});function p(){r.reset(),m.value=!1}function y(){r.post(route("dashboard.payments.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f.success("Pago creado con éxito"),p()}})}function C(i){I({message:"¿Estás seguro de eliminar este pago?",onConfirm:()=>{r.delete(route("dashboard.payments.destroy",i),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f.success("Pago eliminado con éxito")}})}})}const S=B(()=>[{title:"Total a pagar",value:"C$"+o.transaction.goal.toLocaleString(),icon:d},{title:"Pago inicial",value:"C$"+(o.transaction.total-o.payments.reduce((i,a)=>i+a.value,0)).toLocaleString(),icon:d},{title:"Total abonado",value:"C$"+o.transaction.total.toLocaleString(),icon:d},{title:"Faltante",value:"C$"+(o.transaction.goal-o.transaction.total).toLocaleString(),icon:d}]);return(i,a)=>(s(),h(w,{title:"Pagos",breads:b},{header:l(()=>[E,n($,{onClick:a[0]||(a[0]=e=>m.value=!0)})]),default:l(()=>[t("div",j,[t("div",A,[(s(!0),c(v,null,g(S.value,e=>(s(),h(V,{stat:e,key:e.title},null,8,["stat"]))),128))])]),n(T,null,{header:l(()=>[D,z,M]),body:l(()=>[(s(!0),c(v,null,g(u.payments,(e,W)=>(s(),c("tr",U,[t("td",null,[n(x,{date:e.created_at},null,8,["date"])]),t("td",null,[t("span",G,"C$"+F(e.value),1)]),t("td",null,[t("div",H,[t("label",J,[n(_(O),{size:"22",role:"button",onClick:X=>C(e.id)},null,8,["onClick"])])])])]))),256)),u.payments.length==0?(s(),c("tr",K,R)):N("",!0)]),_:1}),n(P,{show:m.value,title:"Product",onOnCancel:p,onOnSubmit:y},{default:l(()=>[n(k,{text:"Cantidad C$",modelValue:_(r).value,"onUpdate:modelValue":a[1]||(a[1]=e=>_(r).value=e),type:"number",min:1,required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{_t as default};
