import{_ as V,c as I}from"./helpers-67032032.js";import{_ as w}from"./DateColumn-6611774f.js";import{_ as T}from"./InputForm-02594a54.js";import{_ as L}from"./FormModal-16e00390.js";import{_ as N}from"./StatCard-8e142152.js";import{T as O}from"./TableSection-75e35bed.js";import{_ as q}from"./AppLayout-ac447384.js";import{t as h}from"./toast-b55ab1c7.js";import{r as g,T as B,c as E,o as l,g as v,h as i,d as s,b as t,a as u,i as b,F as y,t as F,u as d,e as j}from"./app-a13fef8a.js";import{I as m}from"./IconCurrencyDollar-04f50b54.js";import{I as z}from"./IconPencil-77ebb8e2.js";import{I as A}from"./IconTrash-46c54b32.js";import"./Carbon-053ffa43.js";import"./createVueComponent-96374eb1.js";import"./_plugin-vue_export-helper-c27b6911.js";const D=t("span",{class:"title"}," Pagos ",-1),M={class:"mb-4"},U={class:"grid grid-cols-5 gap-4"},G=t("th",null,"Fecha",-1),H=t("th",null,"Valor",-1),J=t("th",null,"Acciones",-1),K={class:"hover:bg-gray-50"},Q={class:"font-bbold"},R={class:"flex gap-2"},W={tooltip:"Editar"},X={tooltip:"Eliminar"},Y={key:0},Z=t("td",{colspan:"3",class:"text-center"},"No hay datos que mostrar",-1),tt=[Z],gt={__name:"Show",props:{transaction:{type:Object,required:!0},payments:{type:Object,required:!0}},setup(p){const o=p,S=[{name:"Inicio",route:route("dashboard.users.index")},{name:"Pendientes",route:route("dashboard.pending.index")},{name:"Pagos",route:route("dashboard.pending.show",o.transaction.id)}],c=g(!1),_=g(!0),a=B({id:null,value:null,transaction_id:o.transaction.id});function f(){a.reset(),_.value=!0,c.value=!1}function C(){_.value?a.post(route("dashboard.payments.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h.success("Pago creado con éxito"),f()}}):a.put(route("dashboard.payments.update",a.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h.success("Pago actualizado con éxito"),f()}})}function $(n){Object.assign(a,n),_.value=!1,c.value=!0}function x(n){I({message:"¿Estás seguro de eliminar este pago?",onConfirm:()=>{a.delete(route("dashboard.payments.destroy",n),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h.success("Pago eliminado con éxito")}})}})}const k=E(()=>[{title:"Total a pagar",value:"C$"+o.transaction.goal.toLocaleString(),icon:m},{title:"Pago inicial",value:"C$"+(o.transaction.total-o.payments.reduce((n,r)=>n+r.value,0)).toLocaleString(),icon:m},{title:"Total abonado",value:"C$"+o.transaction.total.toLocaleString(),icon:m},{title:"Faltante",value:"C$"+(o.transaction.goal-o.transaction.total).toLocaleString(),icon:m}]);return(n,r)=>(l(),v(q,{title:"Pagos",breads:S},{header:i(()=>[D,s(V,{onClick:r[0]||(r[0]=e=>c.value=!0)})]),default:i(()=>[t("div",M,[t("div",U,[(l(!0),u(y,null,b(k.value,e=>(l(),v(N,{stat:e,key:e.title},null,8,["stat"]))),128))])]),s(O,null,{header:i(()=>[G,H,J]),body:i(()=>[(l(!0),u(y,null,b(p.payments,(e,et)=>(l(),u("tr",K,[t("td",null,[s(w,{date:e.created_at},null,8,["date"])]),t("td",null,[t("span",Q,"C$"+F(e.value),1)]),t("td",null,[t("div",R,[t("label",W,[s(d(z),{size:"22",role:"button",onClick:P=>$(e)},null,8,["onClick"])]),t("label",X,[s(d(A),{size:"22",role:"button",onClick:P=>x(e.id)},null,8,["onClick"])])])])]))),256)),p.payments.length==0?(l(),u("tr",Y,tt)):j("",!0)]),_:1}),s(L,{show:c.value,title:"Product",onOnCancel:f,onOnSubmit:C},{default:i(()=>[s(T,{text:"Cantidad C$",modelValue:d(a).value,"onUpdate:modelValue":r[1]||(r[1]=e=>d(a).value=e),type:"number",min:1,required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{gt as default};
