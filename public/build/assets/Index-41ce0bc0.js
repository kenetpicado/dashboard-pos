import{_ as T}from"./DateColumn-a6cf15d8.js";import{_ as p}from"./InputForm-82f0cd28.js";import{_ as $}from"./SelectForm-2b49173e.js";import{_ as k}from"./StatCard-c02c6edf.js";import{T as I}from"./TableSection-f0b02097.js";import{_ as S}from"./ThePaginator-1fa1098c.js";import{_ as D}from"./AppLayout-5aa0f841.js";import{k as N,c as q,l as g,o as a,g as b,h as r,b as t,d as l,a as i,i as m,t as n,F as _,n as w,u as y,j as O,e as L,O as P}from"./app-77d04b12.js";import{I as B}from"./IconCurrencyDollarOff-b174ac16.js";import{I as F}from"./IconCurrencyDollar-c7c31d68.js";import{I as R}from"./IconEye-8df41140.js";import"./Carbon-053ffa43.js";import"./createVueComponent-2e1f8794.js";import"./_plugin-vue_export-helper-c27b6911.js";const U=t("span",{class:"title"}," Transacciones ",-1),j={class:"mb-3"},A={class:"grid grid-cols-5 gap-4"},E=t("option",{selected:"",value:""},"Todos",-1),z=["value"],H={class:"mb-4"},M={class:"grid grid-cols-5 gap-4"},G=t("th",null,"Fecha",-1),J=t("th",null,"Factura #",-1),K=t("th",null,"Tipo",-1),Q=t("th",null,"Responsable",-1),W=t("td",null,"Productos",-1),X=t("th",null,"Descuento",-1),Y=t("th",null,"Total",-1),Z=t("th",null,"Acciones",-1),ee={class:"hover:bg-gray-50"},te={class:"font-bold"},oe={class:"flex gap-2"},se={key:0},ae=t("td",{colspan:"8",class:"text-center"},"No hay datos que mostrar",-1),le=[ae],Ve={__name:"Index",props:{transactions:{type:Object,required:!0},sell_month:{type:Number,required:!0},buy_month:{type:Number,required:!0},users:{type:Object,required:!0}},setup(u){const f=u,v={buy:"COMPRA",sell:"VENTA"},V=[{name:"Inicio",route:route("dashboard.users.index")},{name:"Transacciones",route:route("dashboard.transactions.index")}],C={buy:"badge-red",sell:"badge-indigo"},e=N({user_id:null,from:null,to:null}),x=q(()=>[{title:e.from||e.to?"Compras":"Compras del mes",value:"C$"+f.buy_month.toLocaleString(),icon:B},{title:e.from||e.to?"Ventas":"Ventas del mes",value:"C$"+f.sell_month.toLocaleString(),icon:F}]),d=new URLSearchParams(window.location.search);d.get("user_id")&&(e.user_id=d.get("user_id")),d.get("from")&&(e.from=d.get("from")),d.get("to")&&(e.to=d.get("to")),g(()=>e.user_id,c=>{c||delete e.user_id,e.from||delete e.from,e.to||delete e.to,h()}),g(()=>[e.from,e.to],([c,s])=>{c||delete e.from,s||delete e.to,e.user_id||delete e.user_id,h()});function h(){P.get(route("dashboard.transactions.index"),e,{preserveState:!0,preserveScroll:!0,only:["transactions","buy_month","sell_month"]})}return(c,s)=>(a(),b(D,{title:"Transacciones",breads:V},{header:r(()=>[U]),default:r(()=>[t("div",j,[t("div",A,[l($,{text:"Responsable",modelValue:e.user_id,"onUpdate:modelValue":s[0]||(s[0]=o=>e.user_id=o)},{default:r(()=>[E,(a(!0),i(_,null,m(u.users,o=>(a(),i("option",{value:o.id},n(o.name),9,z))),256))]),_:1},8,["modelValue"]),l(p,{text:"Desde",type:"date",modelValue:e.from,"onUpdate:modelValue":s[1]||(s[1]=o=>e.from=o)},null,8,["modelValue"]),l(p,{text:"Hasta",type:"date",modelValue:e.to,"onUpdate:modelValue":s[2]||(s[2]=o=>e.to=o)},null,8,["modelValue"])])]),t("div",H,[t("div",M,[(a(!0),i(_,null,m(x.value,o=>(a(),b(k,{stat:o,key:o.title},null,8,["stat"]))),128))])]),l(I,null,{header:r(()=>[G,J,K,Q,W,X,Y,Z]),body:r(()=>[(a(!0),i(_,null,m(u.transactions.data,(o,re)=>(a(),i("tr",ee,[t("td",null,[l(T,{date:o.created_at},null,8,["date"])]),t("td",null," #"+n(o.id),1),t("td",null,[t("span",{class:w(C[o.type])},n(v[o.type]),3)]),t("td",null,n(o.user.name),1),t("td",null,n(o.products_count),1),t("td",null," C$"+n(o.discount),1),t("td",null,[t("span",te,"C$"+n(o.total.toLocaleString()),1)]),t("td",null,[t("div",oe,[l(y(O),{href:c.route("dashboard.transactions.show",o.id),tooltip:"Detalles"},{default:r(()=>[l(y(R),{size:"22",role:"button"})]),_:2},1032,["href"])])])]))),256)),u.transactions.data.length==0?(a(),i("tr",se,le)):L("",!0)]),paginator:r(()=>[l(S,{links:u.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{Ve as default};
