import{_ as $}from"./DateColumn-c1e4969e.js";import{_ as y}from"./InputForm-de0ef451.js";import{_ as b}from"./SelectForm-20bf7e16.js";import{_ as I}from"./StatCard-4b9a5cd9.js";import{T as D}from"./TableSection-aa8c49bb.js";import{_ as w}from"./ThePaginator-9c325325.js";import{_ as N}from"./AppLayout-da70e5c6.js";import{c as q}from"./helpers-f36c025a.js";import{t as L}from"./toast-d049f7f9.js";import{j as O,c as E,k as g,o as a,g as v,h as n,b as t,d as l,a as i,r as m,t as d,F as _,n as P,u as p,l as U,e as j,O as V}from"./app-833bfdd4.js";import{I as A}from"./IconCurrencyDollarOff-90fabfdf.js";import{I as B}from"./IconCurrencyDollar-7fe725db.js";import{I as F}from"./IconEye-0953572b.js";import{I as R}from"./IconTrash-c0f9d6b8.js";import"./Carbon-053ffa43.js";import"./createVueComponent-e690d9f9.js";import"./_plugin-vue_export-helper-c27b6911.js";const z=t("span",{class:"title"}," Transacciones ",-1),H={class:"mb-3"},M={class:"grid grid-cols-5 gap-4"},G=t("option",{selected:"",value:""},"Todos",-1),J=["value"],K=t("option",{selected:"",value:""},"Todos",-1),Q=t("option",{value:"buy"},"Compra",-1),W=t("option",{value:"sell"},"Venta",-1),X={class:"mb-4"},Y={class:"grid grid-cols-5 gap-4"},Z=t("th",null,"Fecha",-1),ee=t("th",null,"Factura #",-1),te=t("th",null,"Tipo",-1),oe=t("th",null,"Responsable",-1),se=t("td",null,"Productos",-1),ae=t("th",null,"Descuento",-1),le=t("th",null,"Total",-1),re=t("th",null,"Acciones",-1),ne={class:"hover:bg-gray-50"},ie={key:0,class:"font-bold"},de={key:1,class:"font-bold"},ue={class:"flex justify-between gap-4"},ce=["onClick"],me={key:0},_e=t("td",{colspan:"8",class:"text-center"},"No hay datos que mostrar",-1),pe=[_e],Oe={__name:"Index",props:{transactions:{type:Object,required:!0},sell_month:{type:Number,required:!0},buy_month:{type:Number,required:!0},users:{type:Object,required:!0}},setup(c){const f=c,C={buy:"COMPRA",sell:"VENTA"},x=[{name:"Inicio",route:route("dashboard.index")},{name:"Transacciones",route:route("dashboard.transactions.index")}],k={buy:"badge-red",sell:"badge-indigo"},e=O({user_id:null,from:null,to:null,type:""}),T=E(()=>[{title:e.from||e.to?"Compras":"Compras del mes",value:"C$"+f.buy_month.toLocaleString(),icon:A},{title:e.from||e.to?"Ventas":"Ventas del mes",value:"C$"+f.sell_month.toLocaleString(),icon:B}]),r=new URLSearchParams(window.location.search);r.get("user_id")&&(e.user_id=r.get("user_id")),r.get("from")&&(e.from=r.get("from")),r.get("to")&&(e.to=r.get("to")),r.get("type")&&(e.type=r.get("type")),g(()=>e.user_id,u=>{u||delete e.user_id,e.from||delete e.from,e.to||delete e.to,h()}),g(()=>[e.from,e.to,e.type],([u,s,o])=>{u||delete e.from,s||delete e.to,o||delete e.type,e.user_id||delete e.user_id,h()});function h(){V.get(route("dashboard.transactions.index"),e,{preserveState:!0,preserveScroll:!0,only:["transactions","buy_month","sell_month"]})}function S(u){q({onConfirm:()=>{V.delete(route("dashboard.transactions.destroy",u),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{L.success("Eliminado correctamente")}})}})}return(u,s)=>(a(),v(N,{title:"Transacciones",breads:x},{header:n(()=>[z]),default:n(()=>[t("div",H,[t("div",M,[l(b,{text:"Responsable",modelValue:e.user_id,"onUpdate:modelValue":s[0]||(s[0]=o=>e.user_id=o)},{default:n(()=>[G,(a(!0),i(_,null,m(c.users,o=>(a(),i("option",{value:o.id},d(o.name),9,J))),256))]),_:1},8,["modelValue"]),l(b,{text:"Tipo",modelValue:e.type,"onUpdate:modelValue":s[1]||(s[1]=o=>e.type=o)},{default:n(()=>[K,Q,W]),_:1},8,["modelValue"]),l(y,{text:"Desde",type:"date",modelValue:e.from,"onUpdate:modelValue":s[2]||(s[2]=o=>e.from=o)},null,8,["modelValue"]),l(y,{text:"Hasta",type:"date",modelValue:e.to,"onUpdate:modelValue":s[3]||(s[3]=o=>e.to=o)},null,8,["modelValue"])])]),t("div",X,[t("div",Y,[(a(!0),i(_,null,m(T.value,o=>(a(),v(I,{stat:o,key:o.title},null,8,["stat"]))),128))])]),l(D,null,{header:n(()=>[Z,ee,te,oe,se,ae,le,re]),body:n(()=>[(a(!0),i(_,null,m(c.transactions.data,(o,fe)=>(a(),i("tr",ne,[t("td",null,[l($,{date:o.created_at},null,8,["date"])]),t("td",null," #"+d(o.id),1),t("td",null,[t("span",{class:P(k[o.type])},d(C[o.type]),3)]),t("td",null,d(o.user.name),1),t("td",null,d(o.products_count),1),t("td",null," C$"+d(o.discount),1),t("td",null,[o.payments_total?(a(),i("span",ie," C$"+d(o.payments_total.toLocaleString()),1)):(a(),i("span",de," C$"+d(o.total.toLocaleString()),1))]),t("td",null,[t("div",ue,[l(p(U),{href:u.route("dashboard.transactions.show",o.id),tooltip:"Detalles"},{default:n(()=>[l(p(F),{size:"22",role:"button"})]),_:2},1032,["href"]),t("span",{onClick:he=>S(o.id),tooltip:"Eliminar"},[l(p(R),{size:"22",role:"button",class:"text-red-200"})],8,ce)])])]))),256)),c.transactions.data.length==0?(a(),i("tr",me,pe)):j("",!0)]),paginator:n(()=>[l(w,{links:c.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{Oe as default};
