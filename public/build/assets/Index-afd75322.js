import{_ as w}from"./AddButton-1a8ba19d.js";import{_ as B}from"./InputForm-8d66ad14.js";import{_ as O}from"./SelectForm-8a4e3695.js";import{_ as T}from"./FormModal-cb8f0504.js";import{T as z}from"./TableSection-5f7cb860.js";import{c as j}from"./helpers-378c23d4.js";import{t as b}from"./toast-96892570.js";import{T as A,i as $,o as l,g as F,h as d,d as r,a as i,r as C,F as f,b as t,t as h,u as s,e as U}from"./app-ae7c6072.js";import{_ as q}from"./AppLayout-f898031d.js";import{I as V}from"./IconPencil-75ec47ad.js";import{I as N}from"./IconTrash-ea56bb6d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./createVueComponent-9c12912a.js";function E(){const a=A({id:"",name:"",parent_id:null});function _(n=null){a.post(route("dashboard.categories.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Categoria agregada"),n&&n()}})}function c(n=null){a.put(route("dashboard.categories.update",a.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Categoria actualizada"),n&&n()}})}function g(n){j({onConfirm:()=>{a.delete(route("dashboard.categories.destroy",n),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Categoria eliminada")}})}})}return{form:a,store:_,update:c,destroy:g}}const L=t("span",{class:"title"}," Categorias ",-1),M=t("th",null,"Nombre",-1),P=t("th",null,"Acciones",-1),G={class:"hover:bg-gray-50"},H={class:"font-semibold"},J={class:"flex gap-4"},K={class:"hover:bg-gray-50"},Q={class:"ml-4"},R={class:"flex gap-4"},W={key:0},X=t("td",{colspan:"3",class:"text-center"},"No data to display",-1),Y=[X],Z=t("option",{selected:"",value:""},"Ninguna",-1),D=["value"],_e={__name:"Index",props:{categories:{type:Object,required:!0}},setup(a){const _=[{name:"Inicio",route:route("dashboard.index")},{name:"Categorias",route:route("dashboard.categories.index")}],c=$(!0),{store:g,update:n,destroy:k,form:u}=E(),p=$(!1);function x(S){Object.assign(u,S),p.value=!0,c.value=!1}function y(){c.value?g(v):n(v)}function v(){p.value=!1,c.value=!0,u.reset()}return(S,o)=>(l(),F(q,{title:"Categorias",breads:_},{header:d(()=>[L,r(w,{onClick:o[0]||(o[0]=e=>p.value=!0)})]),default:d(()=>[r(z,null,{header:d(()=>[M,P]),body:d(()=>[(l(!0),i(f,null,C(a.categories,(e,ee)=>(l(),i(f,null,[t("tr",G,[t("td",null,[t("span",H,h(e.name),1)]),t("td",null,[t("div",J,[r(s(V),{role:"button",onClick:m=>x(e)},null,8,["onClick"]),r(s(N),{role:"button",onClick:m=>s(k)(e.id)},null,8,["onClick"])])])]),(l(!0),i(f,null,C(e.childrens,(m,te)=>(l(),i("tr",K,[t("td",null,[t("span",Q,h(m.name),1)]),t("td",null,[t("div",R,[r(s(V),{size:"22",role:"button",onClick:I=>x(m)},null,8,["onClick"]),r(s(N),{size:"22",role:"button",onClick:I=>s(k)(m.id)},null,8,["onClick"])])])]))),256))],64))),256)),a.categories.length==0?(l(),i("tr",W,Y)):U("",!0)]),_:1}),r(T,{show:p.value,title:"Categoria",onOnCancel:o[3]||(o[3]=e=>v()),onOnSubmit:o[4]||(o[4]=e=>y())},{default:d(()=>[r(B,{text:"Nombre",name:"name",modelValue:s(u).name,"onUpdate:modelValue":o[1]||(o[1]=e=>s(u).name=e)},null,8,["modelValue"]),r(O,{modelValue:s(u).parent_id,"onUpdate:modelValue":o[2]||(o[2]=e=>s(u).parent_id=e),text:"Categoria padre",name:"parent_id"},{default:d(()=>[Z,(l(!0),i(f,null,C(a.categories,e=>(l(),i("option",{value:e.id},h(e.name),9,D))),256))]),_:1},8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{_e as default};
