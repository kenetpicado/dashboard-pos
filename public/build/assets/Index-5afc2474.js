import{_ as $}from"./DateColumn-8db4aa16.js";import{_ as y}from"./InputForm-94f64246.js";import{_ as T}from"./SelectForm-d6332c64.js";import{_ as I}from"./StatCard-68a041a6.js";import{T as D}from"./TableSection-4d6a101f.js";import{_ as w}from"./ThePaginator-d0434310.js";import{_ as N}from"./AppLayout-ff8d25b6.js";import{c as q}from"./helpers-11977012.js";import{t as L}from"./toast-c8752f0b.js";import{j as O,c as E,k as b,o as s,g,h as d,b as t,d as r,a as l,r as m,t as n,F as _,n as P,u as f,l as j,e as A,O as v}from"./app-eb5825c1.js";import{I as B}from"./IconCurrencyDollarOff-2860a7e0.js";import{I as F}from"./IconCurrencyDollar-b6af8f6e.js";import{I as R}from"./IconEye-7ae3535f.js";import{I as U}from"./IconTrash-2b6e5d65.js";import"./Carbon-053ffa43.js";import"./createVueComponent-da84b992.js";import"./_plugin-vue_export-helper-c27b6911.js";const z=t("span",{class:"title"}," Transacciones ",-1),H={class:"mb-3"},M={class:"grid grid-cols-5 gap-4"},G=t("option",{selected:"",value:""},"Todos",-1),J=["value"],K={class:"mb-4"},Q={class:"grid grid-cols-5 gap-4"},W=t("th",null,"Fecha",-1),X=t("th",null,"Factura #",-1),Y=t("th",null,"Tipo",-1),Z=t("th",null,"Responsable",-1),ee=t("td",null,"Productos",-1),te=t("th",null,"Descuento",-1),oe=t("th",null,"Total",-1),se=t("th",null,"Acciones",-1),re={class:"hover:bg-gray-50"},ae={key:0,class:"font-bold"},le={key:1,class:"font-bold"},ne={class:"flex justify-between gap-4"},ie=["onClick"],de={key:0},ue=t("td",{colspan:"8",class:"text-center"},"No hay datos que mostrar",-1),ce=[ue],Ne={__name:"Index",props:{transactions:{type:Object,required:!0},sell_month:{type:Number,required:!0},buy_month:{type:Number,required:!0},users:{type:Object,required:!0}},setup(c){const p=c,C={buy:"COMPRA",sell:"VENTA"},V=[{name:"Inicio",route:route("dashboard.index")},{name:"Transacciones",route:route("dashboard.transactions.index")}],k={buy:"badge-red",sell:"badge-indigo"},e=O({user_id:null,from:null,to:null}),x=E(()=>[{title:e.from||e.to?"Compras":"Compras del mes",value:"C$"+p.buy_month.toLocaleString(),icon:B},{title:e.from||e.to?"Ventas":"Ventas del mes",value:"C$"+p.sell_month.toLocaleString(),icon:F}]),u=new URLSearchParams(window.location.search);u.get("user_id")&&(e.user_id=u.get("user_id")),u.get("from")&&(e.from=u.get("from")),u.get("to")&&(e.to=u.get("to")),b(()=>e.user_id,i=>{i||delete e.user_id,e.from||delete e.from,e.to||delete e.to,h()}),b(()=>[e.from,e.to],([i,a])=>{i||delete e.from,a||delete e.to,e.user_id||delete e.user_id,h()});function h(){v.get(route("dashboard.transactions.index"),e,{preserveState:!0,preserveScroll:!0,only:["transactions","buy_month","sell_month"]})}function S(i){q({onConfirm:()=>{v.delete(route("dashboard.transactions.destroy",i),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{L.success("Eliminado correctamente")}})}})}return(i,a)=>(s(),g(N,{title:"Transacciones",breads:V},{header:d(()=>[z]),default:d(()=>[t("div",H,[t("div",M,[r(T,{text:"Responsable",modelValue:e.user_id,"onUpdate:modelValue":a[0]||(a[0]=o=>e.user_id=o)},{default:d(()=>[G,(s(!0),l(_,null,m(c.users,o=>(s(),l("option",{value:o.id},n(o.name),9,J))),256))]),_:1},8,["modelValue"]),r(y,{text:"Desde",type:"date",modelValue:e.from,"onUpdate:modelValue":a[1]||(a[1]=o=>e.from=o)},null,8,["modelValue"]),r(y,{text:"Hasta",type:"date",modelValue:e.to,"onUpdate:modelValue":a[2]||(a[2]=o=>e.to=o)},null,8,["modelValue"])])]),t("div",K,[t("div",Q,[(s(!0),l(_,null,m(x.value,o=>(s(),g(I,{stat:o,key:o.title},null,8,["stat"]))),128))])]),r(D,null,{header:d(()=>[W,X,Y,Z,ee,te,oe,se]),body:d(()=>[(s(!0),l(_,null,m(c.transactions.data,(o,me)=>(s(),l("tr",re,[t("td",null,[r($,{date:o.created_at},null,8,["date"])]),t("td",null," #"+n(o.id),1),t("td",null,[t("span",{class:P(k[o.type])},n(C[o.type]),3)]),t("td",null,n(o.user.name),1),t("td",null,n(o.products_count),1),t("td",null," C$"+n(o.discount),1),t("td",null,[o.payments_total?(s(),l("span",ae," C$"+n(o.payments_total.toLocaleString()),1)):(s(),l("span",le," C$"+n(o.total.toLocaleString()),1))]),t("td",null,[t("div",ne,[r(f(j),{href:i.route("dashboard.transactions.show",o.id),tooltip:"Detalles"},{default:d(()=>[r(f(R),{size:"22",role:"button"})]),_:2},1032,["href"]),t("span",{onClick:_e=>S(o.id),tooltip:"Eliminar"},[r(f(U),{size:"22",role:"button",class:"text-red-200"})],8,ie)])])]))),256)),c.transactions.data.length==0?(s(),l("tr",de,ce)):A("",!0)]),paginator:d(()=>[r(w,{links:c.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{Ne as default};
