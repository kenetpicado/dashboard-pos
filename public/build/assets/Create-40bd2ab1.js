import{_ as B}from"./AppLayout-e609c35e.js";import{T as z,k as A,r as x,c as L,o as m,g as O,h as y,d as a,u,a as f,b as e,F as S,i as T,t as d,e as $}from"./app-ec9b2b19.js";import{_ as E}from"./FormSection-055516d7.js";import{_ as r}from"./InputForm-4cafefdf.js";import{_ as j}from"./FormModal-b98706ae.js";import{I as D}from"./IconTrash-c1fa2c12.js";import{c as F}from"./createVueComponent-3ab2bfc7.js";var K=F("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);const G=e("span",{class:"title"}," Agregar producto ",-1),H={class:"col-span-2"},J={class:"overflow-y-auto col-span-2"},Q={class:"w-full text-sm text-left text-gray-600 mt-5"},R=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",null,"Medida"),e("th",null,"Cant."),e("th",null,"Costo (ud.)"),e("th",null,"Total"),e("th",null,"Precio (ud.)"),e("th",null,"Acciones")])],-1),W={class:"divide-y divide-gray-100 border-t border-gray-100"},X={class:"font-bold"},Y={class:"flex gap-2"},Z={key:0,colspan:"6",class:"text-center"},ee=e("td",{colspan:"5",class:"text-right font-bold"}," Costo total ",-1),te={class:"font-bold"},oe={class:"grid grid-cols-2 gap-4"},le={class:"flex justify-end col-span-2 items-center gap-4"},ne={class:"text-xl font-bold"},me={__name:"Create",props:{product:{type:Object,required:!1},isNew:{type:Boolean,default:!0}},setup(g){var V,_,h,C,k;const i=g,o=z({id:((V=i.product)==null?void 0:V.id)??null,sku:((_=i.product)==null?void 0:_.sku)??null,name:((h=i.product)==null?void 0:h.name)??null,image:((C=i.product)==null?void 0:C.image)??null,discount:((k=i.product)==null?void 0:k.discount)??null,inventory:[],total:0}),n=A({measure:null,quantity:null,cost:null,price:null}),p=x(!1),c=x(null),U=[{name:"Inicio",route:route("dashboard.users.index")},{name:"Productos",route:route("dashboard.products.index")},{name:"Crear",route:route("dashboard.products.create")}];function I(){c.value!==null?o.inventory[c.value]={...n}:o.inventory.push({...n}),v()}function w(s){o.inventory.splice(s,1)}function N(s){c.value=s,n.measure=o.inventory[s].measure,n.quantity=o.inventory[s].quantity,n.cost=o.inventory[s].cost,n.price=o.inventory[s].price,p.value=!0,c.value=s}function v(){n.measure=null,n.quantity=null,n.cost=null,n.price=null,p.value=!1,c.value=null}function M(){i.isNew?(o.total=b.value,o.post(route("dashboard.products.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),toast.success("Producto agregado")}})):o.put(route("dashboard.products.update",o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),toast.success("Producto actualizado")}})}const b=L(()=>o.inventory.reduce((s,l)=>s+l.quantity*l.cost,0));return(s,l)=>(m(),O(B,{title:"Agregar",breads:U},{header:y(()=>[G]),default:y(()=>[a(E,{onOnSubmit:M},{default:y(()=>[a(r,{text:"SKU",modelValue:u(o).sku,"onUpdate:modelValue":l[0]||(l[0]=t=>u(o).sku=t),required:""},null,8,["modelValue"]),a(r,{text:"Name",modelValue:u(o).name,"onUpdate:modelValue":l[1]||(l[1]=t=>u(o).name=t),required:""},null,8,["modelValue"]),a(r,{text:"Image",modelValue:u(o).image,"onUpdate:modelValue":l[2]||(l[2]=t=>u(o).image=t),type:"url"},null,8,["modelValue"]),a(r,{text:"Descuento",modelValue:u(o).discount,"onUpdate:modelValue":l[3]||(l[3]=t=>u(o).discount=t),type:"number",min:0},null,8,["modelValue"]),g.isNew?(m(),f(S,{key:0},[e("div",H,[e("button",{class:"primary-button",type:"button",onClick:l[4]||(l[4]=t=>p.value=!0)}," Agregar inventario ")]),e("div",J,[e("table",Q,[R,e("tbody",W,[(m(!0),f(S,null,T(u(o).inventory,(t,q)=>(m(),f("tr",null,[e("td",null,d(t.measure),1),e("td",null,d(t.quantity),1),e("td",null,[e("span",X,"C$"+d(t.cost),1)]),e("td",null,"C$"+d((t.quantity*t.cost).toLocaleString()),1),e("td",null," C$"+d(t.price),1),e("td",null,[e("div",Y,[a(u(D),{role:"button",onClick:P=>w(q),size:"20"},null,8,["onClick"]),a(u(K),{role:"button",onClick:P=>N(q),size:"20"},null,8,["onClick"])])])]))),256)),e("tr",null,[u(o).inventory.length==0?(m(),f("td",Z," No hay datos que mostrar ")):$("",!0)])]),e("tfoot",null,[e("tr",null,[ee,e("td",te," C$"+d(b.value.toLocaleString()),1)])])])])],64)):$("",!0)]),_:1}),a(j,{show:p.value,title:"Inventario",onOnCancel:v,onOnSubmit:I},{default:y(()=>[e("div",oe,[a(r,{text:"Medida",modelValue:n.measure,"onUpdate:modelValue":l[5]||(l[5]=t=>n.measure=t),required:""},null,8,["modelValue"]),a(r,{text:"Cantidad",modelValue:n.quantity,"onUpdate:modelValue":l[6]||(l[6]=t=>n.quantity=t),type:"number",required:"",min:1},null,8,["modelValue"]),a(r,{text:"Costo (Unidad)",modelValue:n.cost,"onUpdate:modelValue":l[7]||(l[7]=t=>n.cost=t),type:"number",required:"",min:1},null,8,["modelValue"]),a(r,{text:"Precio (Unidad)",modelValue:n.price,"onUpdate:modelValue":l[8]||(l[8]=t=>n.price=t),type:"number",required:"",min:1},null,8,["modelValue"])]),e("div",le,[e("div",ne," Total: C$"+d((n.quantity*n.cost).toLocaleString()),1)])]),_:1},8,["show"])]),_:1}))}};export{me as default};
