import{_ as S}from"./DateColumn-cc38efdb.js";import{_ as T}from"./StatCard-c9ae8ff8.js";import{T as $}from"./TableSection-bf070b77.js";import{_ as k}from"./ThePaginator-7ed4d8de.js";import{_ as I}from"./AppLayout-ebf66ccd.js";import{j as D,c as N,k as p,o as a,g,h as l,b as t,d as r,a as i,i as m,t as n,F as _,n as q,u as b,l as w,e as O,O as L}from"./app-dafdfc05.js";import{_ as P}from"./SelectForm-1588a938.js";import{_ as y}from"./InputForm-f7786dbc.js";import{I as B}from"./IconCurrencyDollarOff-6ebfb23e.js";import{I as F}from"./IconCurrencyDollar-90bf51c8.js";import{I as R}from"./IconEye-421e5e20.js";import"./Carbon-053ffa43.js";import"./createVueComponent-a1973eaa.js";import"./_plugin-vue_export-helper-c27b6911.js";const U=t("span",{class:"title"}," Transacciones ",-1),j={class:"mb-3"},A={class:"grid grid-cols-5 gap-4"},E=t("option",{selected:"",value:""},"Todos",-1),z=["value"],H={class:"mb-4"},M={class:"grid grid-cols-5 gap-4"},G=t("th",null,"Fecha",-1),J=t("th",null,"Factura #",-1),K=t("th",null,"Tipo",-1),Q=t("th",null,"Responsable",-1),W=t("td",null,"Productos",-1),X=t("th",null,"Descuento",-1),Y=t("th",null,"Total",-1),Z=t("th",null,"Acciones",-1),ee={class:"hover:bg-gray-50"},te={class:"font-bold"},oe={class:"flex gap-2"},se={key:0},ae=t("td",{colspan:"8",class:"text-center"},"No hay datos que mostrar",-1),re=[ae],Ve={__name:"Index",props:{transactions:{type:Object,required:!0},sell_month:{type:Number,required:!0},buy_month:{type:Number,required:!0},users:{type:Object,required:!0}},setup(u){const f=u,v={buy:"COMPRA",sell:"VENTA"},V=[{name:"Inicio",route:route("dashboard.users.index")},{name:"Transacciones",route:route("dashboard.transactions.index")}],C={buy:"badge-red",sell:"badge-indigo"},e=D({user_id:null,from:null,to:null}),x=N(()=>[{title:e.from||e.to?"Compras":"Compras del mes",value:"C$"+f.buy_month.toLocaleString(),icon:B},{title:e.from||e.to?"Ventas":"Ventas del mes",value:"C$"+f.sell_month.toLocaleString(),icon:F}]),d=new URLSearchParams(window.location.search);d.get("user_id")&&(e.user_id=d.get("user_id")),d.get("from")&&(e.from=d.get("from")),d.get("to")&&(e.to=d.get("to")),p(()=>e.user_id,c=>{c||delete e.user_id,e.from||delete e.from,e.to||delete e.to,h()}),p(()=>[e.from,e.to],([c,s])=>{c||delete e.from,s||delete e.to,e.user_id||delete e.user_id,h()});function h(){L.get(route("dashboard.transactions.index"),e,{preserveState:!0,preserveScroll:!0,only:["transactions","buy_month","sell_month"]})}return(c,s)=>(a(),g(I,{title:"Transacciones",breads:V},{header:l(()=>[U]),default:l(()=>[t("div",j,[t("div",A,[r(P,{text:"Responsable",modelValue:e.user_id,"onUpdate:modelValue":s[0]||(s[0]=o=>e.user_id=o)},{default:l(()=>[E,(a(!0),i(_,null,m(u.users,o=>(a(),i("option",{value:o.id},n(o.name),9,z))),256))]),_:1},8,["modelValue"]),r(y,{text:"Desde",type:"date",modelValue:e.from,"onUpdate:modelValue":s[1]||(s[1]=o=>e.from=o)},null,8,["modelValue"]),r(y,{text:"Hasta",type:"date",modelValue:e.to,"onUpdate:modelValue":s[2]||(s[2]=o=>e.to=o)},null,8,["modelValue"])])]),t("div",H,[t("div",M,[(a(!0),i(_,null,m(x.value,o=>(a(),g(T,{stat:o,key:o.title},null,8,["stat"]))),128))])]),r($,null,{header:l(()=>[G,J,K,Q,W,X,Y,Z]),body:l(()=>[(a(!0),i(_,null,m(u.transactions.data,(o,le)=>(a(),i("tr",ee,[t("td",null,[r(S,{date:o.created_at},null,8,["date"])]),t("td",null," #"+n(o.id.toString().padStart(5,"0")),1),t("td",null,[t("span",{class:q(C[o.type])},n(v[o.type]),3)]),t("td",null,n(o.user.name),1),t("td",null,n(o.products_count),1),t("td",null," C$"+n(o.discount),1),t("td",null,[t("span",te,"C$"+n(o.total.toLocaleString()),1)]),t("td",null,[t("div",oe,[r(b(w),{href:c.route("dashboard.transactions.show",o.id),tooltip:"Detalles"},{default:l(()=>[r(b(R),{size:"22",role:"button"})]),_:2},1032,["href"])])])]))),256)),u.transactions.data.length==0?(a(),i("tr",se,re)):O("",!0)]),paginator:l(()=>[r(k,{links:u.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{Ve as default};
