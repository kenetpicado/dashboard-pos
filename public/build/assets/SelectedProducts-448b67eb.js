import{_ as f}from"./InputForm-82f0cd28.js";import{T as g,c as b,o as l,a,e as c,F as _,i as h,b as t,d as m,u as i,t as r}from"./app-77d04b12.js";import{t as C}from"./toast-668cb0b1.js";import{I as k}from"./IconTrash-d4e9fefd.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./createVueComponent-2e1f8794.js";const V={key:0,class:"h-full text-center text-gray-400 flex items-center justify-center"},$={class:"w-full rounded-lg p-4 bg-white mb-2 border-2"},S={class:"flex gap-2"},q={key:0,class:"h-36 w-36 flex items-center justify-center"},j=["src"],w={class:"w-full flex flex-col justify-between"},N={class:"mb-3"},T=["onClick"],U={class:"text-gray-400"},D={key:0},L={class:"flex items-center justify-between"},E={key:0,class:"flex flex-col text-end text-xl font-bold"},I={key:1},P={key:0,class:"text-red-300 text-sm"},B={class:"text-xl font-bold"},O={key:1,class:"mt-4"},F={class:"grid grid-cols-2 gap-4"},z={key:0,class:"text-gray-400"},G={class:"flex justify-end my-8"},A={class:"text-xl font-bold"},H=t("button",{class:"secondary-button"},"Cancelar",-1),X={__name:"SelectedProducts",props:{products:{type:Object,required:!1},type:{type:String,required:!0}},setup(d){const u=d,o=g({type:u.type,discount:0,note:"",client:"",total:0,products:null,payment:null}),y=b(()=>u.type=="buy"?u.products.reduce((n,s)=>n+s.quantity*s.cost,0)-(o.discount??0):u.products.reduce((n,s)=>n+(s.quantity*s.price-s.discount),0)-(o.discount??0));function v(){o.products=u.products.map(function(n){return{product_id:n.id,quantity:n.quantity,measure:n.measure,cost:n.cost,price:n.price,inventory_id:n.inventory_id,discount:n.discount??0}}),o.total=y.value,o.post(route("dashboard.transactions.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C.success("Transaccion relizada correctamente")}})}return(n,s)=>(l(),a("div",null,[d.products.length==0?(l(),a("div",V," No hay productos seleccionados ")):c("",!0),(l(!0),a(_,null,h(d.products,(e,p)=>(l(),a("div",$,[t("div",S,[e.image?(l(),a("div",q,[t("img",{src:e.image,onerror:"this.src='/not-found.jpg'",alt:"Imagen",class:"max-h-full max-w-full rounded-lg"},null,8,j)])):c("",!0),t("div",w,[t("div",N,[t("div",{class:"text-lg font-semibold mb-2",onClick:x=>n.$emit("edit",p),role:"button"},r(e.name)+" - "+r(e.measure)+" ("+r(e.quantity)+") ",9,T),t("div",U,[d.type=="buy"?(l(),a("span",D," Costo: C$"+r(e.cost)+", ",1)):c("",!0),t("span",null," Precio: C$"+r(e.price),1)])]),t("div",L,[t("div",null,[m(i(k),{role:"button",onClick:x=>n.$emit("remove",p),class:"text-red-300"},null,8,["onClick"])]),d.type=="buy"?(l(),a("div",E," C$"+r((e.quantity*e.cost).toLocaleString("en-US")),1)):c("",!0),d.type=="sell"?(l(),a("div",I,[e.discount>0?(l(),a("span",P," -C$"+r(e.discount),1)):c("",!0),t("span",B," C$"+r((e.quantity*e.price).toLocaleString("en-US")),1)])):c("",!0)])])])]))),256)),y.value>0?(l(),a("div",O,[t("div",F,[m(f,{text:"Notas (Opcional)",modelValue:i(o).note,"onUpdate:modelValue":s[0]||(s[0]=e=>i(o).note=e)},null,8,["modelValue"]),d.type=="sell"?(l(),a(_,{key:0},[m(f,{text:"Cliente (Opcional)",modelValue:i(o).client,"onUpdate:modelValue":s[1]||(s[1]=e=>i(o).client=e)},null,8,["modelValue"]),m(f,{text:"Descuento C$",modelValue:i(o).discount,"onUpdate:modelValue":s[2]||(s[2]=e=>i(o).discount=e)},null,8,["modelValue"]),m(f,{text:"Pago C$",placeholder:`Todo: C$${y.value}`,modelValue:i(o).payment,"onUpdate:modelValue":s[3]||(s[3]=e=>i(o).payment=e)},null,8,["placeholder","modelValue"])],64)):c("",!0)]),i(o).payment?(l(),a("div",z," Dejar el campo vacio si desea pagar todo el monto. De lo contrario especifique la cantidad que desea abonar. La transaccion se guardara como PENDIENTE. ")):c("",!0),t("div",G,[t("div",A," Total: C$"+r(y.value.toLocaleString("en-US")),1)]),t("div",{class:"flex items-center justify-end gap-4"},[H,t("button",{class:"primary-button",type:"button",onClick:v}," Guardar ")])])):c("",!0)]))}};export{X as default};
