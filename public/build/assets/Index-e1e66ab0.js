import{C as b}from"./Carbon-053ffa43.js";import{o as s,a,b as e,t as n,u as i,l as S,c as $,m as T,g,h as r,d,i as _,F as m,n as k,e as y,j as I,O as V}from"./app-911921b1.js";import{I as q,_ as N}from"./StatCard-cd31b596.js";import{T as w}from"./TableSection-51240291.js";import{_ as D}from"./ThePaginator-858a8dd3.js";import{_ as O}from"./AppLayout-157105b3.js";import{_ as F}from"./SelectForm-bbefc4c4.js";import{I as L}from"./IconCurrencyDollarOff-78d89b08.js";import{I as P}from"./IconEye-5f939758.js";import"./createVueComponent-c420cc45.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"font-medium"},R=["tooltip"],j={__name:"DateColumn",props:{date:{type:String,required:!0}},setup(o){return(c,h)=>(s(),a("div",B,[e("span",{class:"text-gray-700 mb-1",tooltip:i(b).create(o.date).diffForHumans()},n(i(b).create(o.date).format("d/m/Y")),9,R)]))}},A=e("span",{class:"title"}," Transacciones ",-1),E={class:"mb-3"},z={class:"grid grid-cols-5 gap-4"},U=e("option",{selected:"",value:""},"Todos",-1),H=["value"],M={class:"mb-4"},Y={class:"grid grid-cols-5 gap-4"},G=e("th",null,"Fecha",-1),J=e("th",null,"Factura #",-1),K=e("th",null,"Tipo",-1),Q=e("th",null,"Responsable",-1),W=e("td",null,"Productos",-1),X=e("th",null,"Descuento",-1),Z=e("th",null,"Total",-1),ee=e("th",null,"Acciones",-1),te={class:"hover:bg-gray-50"},se={key:0},oe={class:"font-bold"},ae={class:"flex gap-2"},ne={key:0},re=e("td",{colspan:"7",class:"text-center"},"No hay datos que mostrar",-1),le=[re],ve={__name:"Index",props:{transactions:{type:Object,required:!0},sell_month:{type:Number,required:!0},buy_month:{type:Number,required:!0},users:{type:Object,required:!0}},setup(o){const c=o,h={buy:"COMPRA",sell:"VENTA"},v=[{name:"Inicio",route:route("dashboard.users.index")},{name:"Transacciones",route:route("dashboard.transactions.index")}],C={buy:"badge-red",sell:"badge-indigo"},l=S({user_id:null}),x=$(()=>[{title:"Compras del mes",value:"C$"+c.buy_month.toLocaleString(),icon:L},{title:"Ventas del mes",value:"C$"+c.sell_month.toLocaleString(),icon:q}]),p=new URLSearchParams(window.location.search);return p.get("user_id")&&(l.user_id=p.get("user_id")),T(()=>l.user_id,u=>{u||delete l.user_id,V.get(route("dashboard.transactions.index"),l,{preserveState:!0,preserveScroll:!0,only:["transactions","buy_month","sell_month"]})}),(u,f)=>(s(),g(O,{title:"Transacciones",breads:v},{header:r(()=>[A]),default:r(()=>[e("div",E,[e("div",z,[d(F,{text:"Responsable",modelValue:l.user_id,"onUpdate:modelValue":f[0]||(f[0]=t=>l.user_id=t)},{default:r(()=>[U,(s(!0),a(m,null,_(o.users,t=>(s(),a("option",{value:t.id},n(t.name),9,H))),256))]),_:1},8,["modelValue"])])]),e("div",M,[e("div",Y,[(s(!0),a(m,null,_(x.value,t=>(s(),g(N,{stat:t,key:t.title},null,8,["stat"]))),128))])]),d(w,null,{header:r(()=>[G,J,K,Q,W,X,Z,ee]),body:r(()=>[(s(!0),a(m,null,_(o.transactions.data,(t,de)=>(s(),a("tr",te,[e("td",null,[d(j,{date:t.created_at},null,8,["date"])]),e("td",null," #"+n(t.id.toString().padStart(5,"0")),1),e("td",null,[e("span",{class:k(C[t.type])},n(h[t.type]),3)]),e("td",null,n(t.user.name),1),e("td",null,n(t.products_count),1),e("td",null,[t.discount>0?(s(),a("span",se,"C$"+n(t.discount),1)):y("",!0)]),e("td",null,[e("span",oe,"C$"+n(t.total.toLocaleString()),1)]),e("td",null,[e("div",ae,[d(i(I),{href:u.route("dashboard.transactions.show",t.id),tooltip:"Detalles"},{default:r(()=>[d(i(P),{size:"22",role:"button"})]),_:2},1032,["href"])])])]))),256)),o.transactions.data.length==0?(s(),a("tr",ne,le)):y("",!0)]),paginator:r(()=>[d(D,{links:o.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{ve as default};
