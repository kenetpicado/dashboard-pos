import{_ as w}from"./AppLayout-8e860020.js";import{T as B}from"./TableSection-c72d33d8.js";import{_ as O}from"./AddButton-a8448483.js";import{_ as T}from"./FormModal-a9fa70de.js";import{_ as z}from"./InputForm-1eae37c8.js";import{_ as j}from"./SelectForm-ff73a172.js";import{c as A}from"./helpers-ffa2c253.js";import{t as b}from"./toast-13ef7ed8.js";import{T as F,i as $,o as l,g as P,h as d,d as n,a as i,r as h,F as f,b as t,t as C,u as s,e as U}from"./app-1585a32c.js";import{I as V}from"./IconPencil-c38d8d31.js";import{I as y}from"./IconTrash-73c6da6d.js";import"./createVueComponent-298bc17c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sweetalert2.all-1bf5477c.js";import"./index-31bee5ed.js";function q(){const a=F({id:"",name:"",parent_id:null});function _(r=null){a.post(route("dashboard.categories.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Categoria agregada"),r&&r()}})}function c(r=null){a.put(route("dashboard.categories.update",a.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Categoria actualizada"),r&&r()}})}function v(r){A({onConfirm:()=>{a.delete(route("dashboard.categories.destroy",r),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Categoria eliminada")}})}})}return{form:a,store:_,update:c,destroy:v}}const E=t("span",{class:"title"}," Categorias ",-1),L=t("th",null,"Nombre",-1),M=t("th",null,"Acciones",-1),G={class:"hover:bg-gray-50"},H={class:"font-semibold"},J={class:"flex gap-4"},K={class:"hover:bg-gray-50"},Q={class:"ml-4"},R={class:"flex gap-4"},W={key:0},X=t("td",{colspan:"3",class:"text-center"},"No data to display",-1),Y=[X],Z=t("option",{selected:"",value:""},"None",-1),D=["value"],ge={__name:"Index",props:{categories:{type:Object,required:!0}},setup(a){const _=[{name:"Inicio",route:route("dashboard.index")},{name:"Categorias",route:route("dashboard.categories.index")}],c=$(!0),{store:v,update:r,destroy:k,form:u}=q(),p=$(!1);function x(S){Object.assign(u,S),p.value=!0,c.value=!1}function N(){c.value?v(g):r(g)}function g(){p.value=!1,c.value=!0,u.reset()}return(S,o)=>(l(),P(w,{title:"Categorias",breads:_},{header:d(()=>[E,n(O,{onClick:o[0]||(o[0]=e=>p.value=!0)})]),default:d(()=>[n(B,null,{header:d(()=>[L,M]),body:d(()=>[(l(!0),i(f,null,h(a.categories,(e,ee)=>(l(),i(f,null,[t("tr",G,[t("td",null,[t("span",H,C(e.name),1)]),t("td",null,[t("div",J,[n(s(V),{role:"button",onClick:m=>x(e)},null,8,["onClick"]),n(s(y),{role:"button",onClick:m=>s(k)(e.id)},null,8,["onClick"])])])]),(l(!0),i(f,null,h(e.childrens,(m,te)=>(l(),i("tr",K,[t("td",null,[t("span",Q,C(m.name),1)]),t("td",null,[t("div",R,[n(s(V),{size:"22",role:"button",onClick:I=>x(m)},null,8,["onClick"]),n(s(y),{size:"22",role:"button",onClick:I=>s(k)(m.id)},null,8,["onClick"])])])]))),256))],64))),256)),a.categories.length==0?(l(),i("tr",W,Y)):U("",!0)]),_:1}),n(T,{show:p.value,title:"Categoria",onOnCancel:o[3]||(o[3]=e=>g()),onOnSubmit:o[4]||(o[4]=e=>N())},{default:d(()=>[n(z,{text:"Name",modelValue:s(u).name,"onUpdate:modelValue":o[1]||(o[1]=e=>s(u).name=e)},null,8,["modelValue"]),n(j,{modelValue:s(u).parent_id,"onUpdate:modelValue":o[2]||(o[2]=e=>s(u).parent_id=e),text:"Parent category",name:"parent_id"},{default:d(()=>[Z,(l(!0),i(f,null,h(a.categories,e=>(l(),i("option",{value:e.id},C(e.name),9,D))),256))]),_:1},8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{ge as default};
